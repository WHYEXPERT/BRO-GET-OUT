<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ReportHub Ultra</title>
<style>
  /* --- Reset i podstawy --- */
  body { margin:0; font-family:'Segoe UI', sans-serif; background:#f9fafb; color:#111827; transition:0.3s; }
  .dark { background:#111827; color:#f9fafb; }
  .container { max-width:1200px; margin:0 auto; padding:20px; }
  h1,h2,h3,h4,h5,h6 { margin:0; }
  button { cursor:pointer; }

  /* --- Karty i przyciski --- */
  .card { background: rgba(255,255,255,0.85); backdrop-filter: blur(6px); border-radius:20px; padding:15px; margin-bottom:15px; box-shadow:0 10px 20px rgba(0,0,0,0.08); transition:0.3s; }
  .dark .card { background: rgba(31,41,55,0.85); }
  .button { border:none; border-radius:15px; padding:10px 15px; font-weight:600; transition:0.3s; }
  .button-gradient { background: linear-gradient(to right,#8b5cf6,#ec4899); color:white; }
  .button-gradient:hover { filter: brightness(1.1); }
  .button-outline { border:2px solid #8b5cf6; color:#8b5cf6; background:transparent; }
  .button-outline:hover { background: rgba(139,92,246,0.1); }

  input, select, textarea { width:100%; padding:10px; margin:5px 0 10px 0; border-radius:12px; border:1px solid #d1d5db; transition:0.3s; }
  input:focus, textarea:focus, select:focus { outline:none; border-color:#8b5cf6; box-shadow:0 0 0 2px rgba(139,92,246,0.2); }
  .dark input, .dark select, .dark textarea { background:rgba(31,41,55,0.6); color:#f9fafb; border:1px solid #4b5563; }
  .dark input:focus, .dark textarea:focus, .dark select:focus { border-color:#a78bfa; box-shadow:0 0 0 2px rgba(167,139,250,0.2); }

  /* --- Header --- */
  header { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; }
  .header-title { font-size:1.8rem; font-weight:700; }
  .header-button { padding:8px 15px; border-radius:12px; border:none; background:#8b5cf6; color:white; font-weight:600; }
  .header-button:hover { filter: brightness(1.1); }

  /* --- Raporty --- */
  .report-card { padding:15px; border-radius:15px; margin-bottom:10px; box-shadow:0 5px 15px rgba(0,0,0,0.05); transition:all 0.3s ease; background: rgba(255,255,255,0.9); opacity:0; transform: translateY(-20px); }
  .dark .report-card { background: rgba(31,41,55,0.9); }
  .report-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:5px; }
  .badge { padding:3px 8px; border-radius:8px; font-size:0.8rem; font-weight:600; color:white; }
  .badge-lack { background:#f97316; }
  .badge-timeout { background:#a855f7; }

  /* --- Stats bar --- */
  .stats-bar { display:flex; gap:15px; margin-bottom:20px; flex-wrap:wrap; }
  .stats-card { flex:1; min-width:180px; text-align:center; padding:15px; border-radius:20px; background: rgba(255,255,255,0.85); backdrop-filter: blur(6px); box-shadow:0 10px 20px rgba(0,0,0,0.08); }
  .dark .stats-card { background: rgba(31,41,55,0.85); }

  form label { font-weight:600; display:block; margin-bottom:5px; }
  form .form-group { margin-bottom:15px; }
</style>
</head>
<body>
<div id="app"></div>

<script>
  // --- Dane i ID ---
  let reports = [];
  let nextId = 1;

  const app = document.getElementById('app');

  function render(page){
    app.innerHTML='';
    if(page==='dashboard') renderDashboard();
    if(page==='submit') renderSubmit();
  }

  function toggleDarkMode(){ document.body.classList.toggle('dark'); }

  function animateIn(el){ requestAnimationFrame(()=>{ el.style.opacity=1; el.style.transform='translateY(0)'; }); }
  function animateOut(el,callback){ el.style.opacity=0; el.style.transform='translateY(-20px)'; setTimeout(callback,300); if(callback) setTimeout(callback,300); }

  // --- Dashboard ---
  function renderDashboard(){
    const container = document.createElement('div'); container.className='container';

    const header = document.createElement('header');
    const title = document.createElement('h1'); title.className='header-title'; title.textContent='ReportHub Ultra';
    const darkBtn = document.createElement('button'); darkBtn.className='header-button'; darkBtn.textContent='Toggle Dark Mode'; darkBtn.onclick=toggleDarkMode;
    header.appendChild(title); header.appendChild(darkBtn); container.appendChild(header);

    // --- Stats Bar ---
    const stats = document.createElement('div'); stats.className='stats-bar';
    const totalCard = document.createElement('div'); totalCard.className='stats-card'; totalCard.innerHTML=`<h2>Total Reports</h2><h3>${reports.length}</h3>`;
    const exportBtn = document.createElement('button'); exportBtn.className='button button-gradient'; exportBtn.textContent='Export CSV'; exportBtn.onclick=exportReports;
    const newReportBtn = document.createElement('button'); newReportBtn.className='button button-outline'; newReportBtn.textContent='New Report'; newReportBtn.onclick=()=>render('submit');
    stats.appendChild(totalCard); stats.appendChild(exportBtn); stats.appendChild(newReportBtn);
    container.appendChild(stats);

    // --- Search ---
    const search = document.createElement('input'); search.placeholder='Search by username...'; container.appendChild(search);

    // --- List ---
    const list = document.createElement('div'); container.appendChild(list);

    function renderReports(){
      list.innerHTML='';
      const term = search.value.toLowerCase();
      const filtered = reports.filter(r=>r.username.toLowerCase().includes(term));
      if(filtered.length===0){
        const p = document.createElement('p'); p.textContent=term?'No reports match your search':'No reports yet'; list.appendChild(p);
      }
      filtered.forEach(r=>{
        const card = document.createElement('div'); card.className='report-card';
        const badgeClass = r.punishment==='Lack'?'badge badge-lack':'badge badge-timeout';
        card.innerHTML=`
          <div class="report-header"><span><strong>${r.username}</strong></span><span class="${badgeClass}">${r.punishment}</span></div>
          <p>Reason: ${r.reason}</p>
          <p>Proof: ${r.proof_link}</p>
        `;
        const delBtn = document.createElement('button'); delBtn.className='button button-gradient'; delBtn.textContent='Delete';
        delBtn.onclick=()=>{ if(confirm('Delete this report?')){ animateOut(card,()=>{ reports = reports.filter(rep=>rep.id!==r.id); renderReports(); }); } };
        card.appendChild(delBtn);
        list.appendChild(card);
        animateIn(card);
      });
    }

    search.oninput=renderReports;
    renderReports();

    app.appendChild(container);
  }

  // --- Submit ---
  function renderSubmit(){
    const container = document.createElement('div'); container.className='container';

    const header = document.createElement('header');
    const title = document.createElement('h1'); title.className='header-title'; title.textContent='Submit Report';
    const backBtn = document.createElement('button'); backBtn.className='header-button'; backBtn.textContent='Back'; backBtn.onclick=()=>render('dashboard');
    header.appendChild(title); header.appendChild(backBtn); container.appendChild(header);

    const form = document.createElement('form');

    function createInput(labelText,type='text'){
      const div = document.createElement('div'); div.className='form-group';
      const label = document.createElement('label'); label.textContent=labelText;
      let input;
      if(type==='textarea'){ input=document.createElement('textarea'); }
      else if(type==='select'){ input=document.createElement('select'); ['Lack','A Timeout'].forEach(opt=>{ const option=document.createElement('option'); option.value=opt; option.textContent=opt; input.appendChild(option); }); }
      else{ input=document.createElement('input'); input.type='text'; }
      div.appendChild(label); div.appendChild(input); form.appendChild(div); return input;
    }

    const usernameInput = createInput("Rule Breaker's Username");
    const reasonInput = createInput("Reason",'textarea');
    const punishmentInput = createInput("Punishment",'select');
    const proofInput = createInput("Proof");

    const submitBtn = document.createElement('button'); submitBtn.type='submit'; submitBtn.className='button button-gradient'; submitBtn.textContent='Submit Report';
    form.appendChild(submitBtn);

    form.onsubmit=(e)=>{
      e.preventDefault();
      const newReport={ id:nextId++, username:usernameInput.value, reason:reasonInput.value, punishment:punishmentInput.value, proof_link:proofInput.value };
      reports.push(newReport);
      alert('Report submitted!');
      render('dashboard');
    };

    container.appendChild(form);
    app.appendChild(container);
  }

  function exportReports(){
    let csv='Username,Reason,Punishment,Proof\n';
    reports.forEach(r=>{ csv+=`"${r.username}","${r.reason}","${r.punishment}","${r.proof_link}"\n`; });
    const blob = new Blob([csv], {type:'text/csv'}); const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='reports.csv'; a.click();
  }

  // --- Start ---
  render('dashboard');
</script>
</body>
</html>
